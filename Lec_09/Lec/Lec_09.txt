* Какво означава concurent

    Превода на concurrent е едновременен или случващ се по едно и също време

    Когато две или повече събития, действия или процеси са concurrent, те протичат в един и същи период от време, като се застъпват

    # Concurrent изпълнение описва способността на системата да управлява множество задачи, които напредват едновременно

* Concurrency 

    Concurrency е способността да се прави повече от едно нещо в един и същи момемнт
    # Тоест множество задачи започват, изпълняват се и приключват, в припокриващи се времеви периоди, в непредсказуем ред
    # Това означава, че няколко задачи изглеждат сякаш се случват по едно и също време, като системата првключва между тях

    За пример, могат да се редактират документи, докато се слуша музика от други приложение и да се сваля файл от Интернето от трето, едновременно

    Concurrency не предполага непременно няколко приложение, едновременно изпълнение на части от едно приложение също се нарича concurrency 
    # За пример, един тесктов редактор форматира текста, докато прави и spell-checking и respond-ва на keyboard events едновременно 

    # Накратко, concurrency е управлението на няколко задачи, които се изпълняват в припокриващи се периоди, независимо дали са в различни програми или в рамките на една и съща програма

* Разликите между concurrent и paralel 

    Concurrency означава, че задачите се управляват по едно и също време, но не е задължително да се изпълняват в един и същи миг.
    Това може да се случи на един процес, който бързо превключва между тях, именно това създава илюзията за едновременност

    Parallelism означава, че задачите се изпълняват буквално в един и същи момент. Това изисква хардуер с няколко ядра или процесора

    Multiprocessing (много процеси) е истински паралелизъм
    Multitasking (на един процесор) e concurrency, но не е паралелизъм 

* Units of multithreading 

    Concurrency е много общ термин и може дас е използва на различни нива

    Има три конкретни нива или единици:
    - Multiprocessing (Многопроцесорност): много процеси изпълняващи инструкции concurrently (едновременно), единицата е процесор
    # Това означава, че имаме няколко физически процесора, които работят паралелно, които работят паралелно

    - Multitasking (Многозадачност): много задачи/процеси, изпълняващи едновременно на един процесор, единицата е процес
    # Тук един процесор бързо превключва между различни задачи, създавайки илюзията, че те работят едновременно 

    - Мultithreading (Многонишковост): множество части на една и съща програма се изпълняват concurrently, единицата е нишка
    # Това е concurrency в рамките на едно-единствено приложение, където различни нишки (по-малки части от процеса) се изпълняват едновременно 

* Процеси и нишки 

    Процес е програма по време на изпълнение като си има собствено адресно пространство, call stack И handles към ресурси (например отворени файлове)
    # Накратко процесът е работещото приложение (примерно web browser или текстов редактор), което има собствена, изолирана памет и ресурси

    Нишка е път на изпълнение вътре в процес 
    Има няколко важни уточнения за нишките:
    - всеки процес има поне една нишка, наричана main 
    - всяка нишка може да създава допълнителни нишки
    - нишките в един процес споделят ресурсите му, в частност, памет или отворени файлове. Всяка нишка обаче си има собствен call stack

    # За разлика от процесите (те са изолирани), нишките в рамките на един процес работят в споделена памет, което им позволява да си сътрудничат по-лесно.
    # Всяка нишка следи собствения си път на изпълнение (чрез нейния call stack)

* Сравнение между процеси и нишки 

    Сравнения:
    - Стартиране: Процесите стартират бавно, докато нишки стартират бързо
    # Стартирането на един процес изисква заделяне на нова, изолирана памет и ресурси от операционната система, докато нишката се стартира в рамките на вече съществуващ процес
    - Изолация: Процесите имат изолациям докато нишките не
    # Процесите са изолирани един от друг, докато нишките в един процес споделят една и съща памет 
    - Комуникация: Комуникацията между процеси е бавна, докато при нишките е бърза
    # Поради липсата на изолация, нишките могат да комуникират бързо, като четат и пишат в общата си памет.
    # Процесите използват по-бавни и по-сложни начини за комуникация, осигурени от ОС понеже паметта е изолирана

* Concurrent vs паралелно изпълнение 

    Concurrency не предполага непременно паралелно изпълнение 
    # Основното е че concurrency и паралелното изпълнение не са ендо и също нещо

    Когато се спомене за "множество задачи, изпълняващи се едновременно" трябва да се има предвид "множество задачи, прогресиращи през един и същи времеви интервал"
    ОС превключва между задачите толкова често, че за потребителя изглежда, че те се изпълняват едновременно, в един и същи момент 
    # Управлението на множество задачи всъщност се случва като задачите напредват в един и същи период от време, но не задължително в един и същ физически момент
    # Това се постига много бързо чрез превключване между задачите, като изглежда, че те работят едновременно.

    Всъщност паралелното изпълнение е невъзможно на компютър с единствен (single-core) процесор
    # Паралелно изпълнение е когато две или повече задчи работят в абсолютно един и същи физикчески момент
    # За да е възможно това, е нужен хардуер, който да го позволява - примерно процесор с няколко ядра. Всяко ядро да може да управлява различна задачада по едно и също време 

    Накратко:
    - Concurrency е справянето с много неща наведнъж (чрез редуване)
    - Паралелизъм е правенето на много неща наведнъж (буквално по едно и също време)
    
* Как работят еднонишковите и многонишковите програми 

    В една еднонишкова програма задачите се изпълняват една по една:
    - Първо трява да се приключи едната операция
    - След това се изпълнява другата
    # Като аналогия може да се погледне касиер и магазин, всички клиенти минават през него един по един и следващия не може да започне, докато предният не е приключил

    В многонишкова програма задачите могат да се изпълняват едновременно:
    - Програмата може да работ по няколко задачи наведнъж
    # Това е като магазин с много кас, няколко кличента могат да бъдат обслужени по едно и също време, което прави процеса по-бърз

    # Наратко, еднонишковата програма прави само едно нещо в даден момент, докато многонишковата програма може да се справя с няколко неща едновременно, като разпределя работата в различни нишки

* Ползи от многонишковостта

    Съществено увеличена производителност на програмите, чрез пълноценна употреба (utilization) на наличните ресурси, като CPU
    # Вместо програмата да използва само едно ядро на процесора, докато другите си почиват, многонишковстта позволява да се разпредели работата върху всички налични ядра
    
    Подобрено потребителско изживяване (more responsive UIs)
    # Ако една програма е еднонишкова, когато тя започне тежка операция целият и интерфейс би замръзнал, докато се обработи
    # При многонишковото програмиране, тежката работа се изнася в background нишка, докато главната нишка (която би отговорила за интерфейса) остава свободна. Това е начин да накараме интерфейса да остане responsive

    По-проста архитектрура
    # Има някой случай, в който многонишковстта опростява логиката 

    Сложен, асинхронен workflow може да се декомпозира до няколко прости, последователни workflows, изпълнявани в отделни нишки
    # Вместо една сложно програма, която управлява няколко задачи едновременно, може да се декомпозира проблема като се създадат отделни нишки, като всяка от тях изпълнява една проста ясна задача

* Проблеми свързани с concurrency

    Thread interference e това, което се случва, а Race Condition е ситуацията, която го позволява

    Когато множество нишки едновременно четат и пишат споделени данни и тези операции се припокриват във времето, тогава резултатът зависи от реда на четенията и писанията, който е непредвидим
    # Проблема идва когато поне една нишка се опитва да промени данните, докато други четат или също пишат 
    # Тогава програмата става ненадеждна, понякога може да работи правилно, а друг път ще даде напълно грешене резултат 

    Memory inconsistency е когато различни нишки "виждат" по различен начин едни и същи данни в един и същи момент
    Този проблем се случва, когато една нишка промени стойността на някаква споделена данна, но тази промяна не е "стигнала" до другите нишки, които продължават да виждат старата стойност
    Причината това да се случи е, че компилаторът, JVM-ът и CPU-то правят оптимизации (размества инструкции, кешират стойностти от RAM паметта в регистри или кеш на CPU-тата)
    # Накратко заради тези оптимизации, различните нишки може да работят с локални, кеширани копия на данните и промените, направени от една нишка, да не са видими веднага за останалите 

* Проблеми с multithreading-a

    Това е мощен метод, за ускоряване на програми, като се изпълняват няколко задачи едновременно, но той въвежда специфични трудности
    Проблемите свързани с multithreading-а са:
    - Кодът става по-сложен и неинтуитивен
    # Вместо кода да се изпълнява ред по ред ще има няколко нишки, които работят едновременно. Трябва да се мисли как те комуникират помежду си, коя кога се изпълнява и как да се синхронизират

    - Ползват се повече ОС ресурси за многото нишки, например памет
    # ОС трябва да отдели за всяка нишка ресурси, като собствен стак (мястото кудето се съхраняват временни данни), както и че процесора трябва да превключва между различните нишки
    # Ако примерно се направят прекалено много нишки, системата може да отдели повече време на превключването отколкото на истинската работа

    - Нов източник на трудни за репродуциране и дебъгване грешки, появяват се грешки, които съществуват само в многонишковото програмиране
    # Race Condition е когато две или повече нишки се опитват да променят едни и същи данни по едно и също време, така крайния резултат на операцията завбиси от непредсказуемия ред, в който ОС изпълнява инструкциите на различните нишки
    # Memory Inconsistency, поради кеширането на процесор, една нишка може да направи промяна, която друга нишка не вижда веднага

    - Liveness, Starvation и Performance рискове
    # Liveness е проблема, когато програмата не напредва, но уж работи (deadlock проблема)
    # Starvation е проблема, когато една нишка никога не получава шанс да се изпълни, защото други нишки простоянно и вземат ресурсите
    # Добавянето на повече нишки не винаги прави програмата по-бръза, понякога може да се забави заради разходите по управлението им

    - Много